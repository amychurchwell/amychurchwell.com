<section>
    <h2>Get in touch! ⤵</h2>
    <form
        name="contact"
        method="POST"
        action="/thanks/"
        data-netlify="true"
        netlify-honeypot="bot-field"
        id="contact"
    >
        <input type="hidden" name="form-name" value="contact" />
        <p class="visually-hidden">
            <label>Don’t fill this out: <input name="bot-field" /></label>
        </p>
    
        <label>
            Name:
            <input type="text" name="name" required />
        </label>
    
        <label>
            Email:
            <input type="email" name="email" required /></label>
        <label>Message: <textarea name="message" required></textarea></label>
    
        <div data-netlify-recaptcha="true"></div>
    
        <button type="submit">Send</button>
        <p id="status" hidden>Message sent — thank you!</p>
    </form>
</section>

<script>
    function encode(data) {
        return Object.keys(data)
            .map(
                (key) =>
                    encodeURIComponent(key) +
                    '=' +
                    encodeURIComponent(data[key])
            )
            .join('&')
    }

    const form = document.getElementById('contact')
    form.addEventListener('submit', async (e) => {
        e.preventDefault()
        const formData = new FormData(form)
        const body = encode(Object.fromEntries(formData.entries()))
        try {
            await fetch('/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body,
            })
            document.getElementById('status').hidden = false
            form.reset()
        } catch (err) {
            alert('Sorry, something went wrong.')
        }
    })
</script>
